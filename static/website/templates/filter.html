{% extends 'website/templates/base.html' %}
{% block content %}
{% if question %}
    <div class="question">
            <div class="title" style="margin-bottom: 10px;">
                <a href="{% url 'website:get_question' question.id %}">{{ question.title }}</a>
            </div> 
            <span class="category">
                <small>
                    <a href="{% url 'website:filter' question.category %}?qid={{ question.id }}">
                        {{ question.category }}
                    </a>
                </small>
            </span>

            <span class="tutorial">
                <small>
                    <a href="{% url 'website:filter' question.category question.tutorial %}?qid={{ question.id }}">
                        {{ question.tutorial}}
                    </a>
                </small>
            </span>

            <span class="minute_range">
                <small>
                    <a href="{% url 'website:filter' question.category question.tutorial question.minute_range %}?qid={{ question.id }}">
                        {{ question.minute_range }} min
                    </a>
                </small>
            </span>

            <span class="second_range">
                <small>
                    <a href="{% url 'website:filter' question.category question.tutorial question.minute_range question.second_range%}?qid={{ question.id }}">
                        {{ question.second_range }} sec
                    </a>
                </small>
            </span>

            <span class="meta">
                <small>
                        <i>
                            {{ question.date_created|date:"d-m-y" }}, {{ question.date_created|time }}
                        </i>
                </small>

                <span class="user">
                    {{ question.user }}
                </span>
            </span>

        </div>
{% endif %}

{% if questions %}
<h5>
    These are the similar questions in:
    {% if category %}
        {{ category }}
    {% endif %}
    {% if tutorial %}
       <b> &gt; </b>
       {{ tutorial }}
    {% endif %}
    {% if minute_range %}
       <b> &gt; </b>
       {{ minute_range }} min
    {% endif %}
    {% if second_range %}
       <b> &gt; </b>
       {{ second_range }} sec
    {% endif %}
</h5>

    <table class="table table-striped table-bordered">
        <th> FOSS </th>
        <th> Tutorial</th>
        <th> Min </th>
        <th> Sec </th>
        <th> Question</th>
        <th> Date</th>
        <th> Views</th>
        <th> Replies</th>
        <th> User</th>
        {% for question in questions %}
        <tr>
            <td>
                <span href="#" class="category" data-toggle="tooltip" data-placement="top" title="{{ question.category}}">
                    {{ question.category|truncatechars:12 }} 
                </span>
                <a class="pull-right" href="{% url 'website:filter' question.category %}?qid={{ question.id }}">
                    <span class="glyphicon glyphicon-search"></span>
                </a>
            </td>

            <td>
                <span class="tutorial" data-toggle="tooltip" data-placement="top" title="{{ question.tutorial}}">
                    {{ question.tutorial|truncatechars:12 }}
                </span>
                <a class="pull-right" href="{% url 'website:filter' question.category question.tutorial %}?qid={{ question.id }}">
                    <span class="glyphicon glyphicon-search"></span>
                </a>
            </td>

            <td>
                <span>
                    <a href="{% url 'website:filter' question.category question.tutorial question.minute_range %}?qid={{ question.id }}">
                        {{ question.minute_range }}
                    </a>
                </span>
            </td>

            <td>        
                <span>
                    <a href="{% url 'website:filter' question.category question.tutorial question.minute_range question.second_range%}?qid={{ question.id }}">
                        {{ question.second_range }}
                    </a>
                </span>
            </td>

            <td>
                <span class="title" data-toggle="tooltip" data-placement="top" title="{{ question.title }}">
                    <a href="{% url 'website:get_question' question.id %}">{{ question.title|truncatechars:40 }}</a>
                </span>            
            </td>

            <td>    
                <span>
                    <i>
                        {{ question.date_created|date:"d-m-y" }}
                    </i>
                </span>
            </td>
                    
            <td>
                {{ question.views}}
            </td>

            <td>
                {{ question.reply_set.count }}
            </td>

            <td>
                    <span class="title" data-toggle="tooltip" data-placement="top" title="{{ question.user }}">
                    {{ question.user|truncatechars:10 }}
                </span>
            </td>

        </tr>
        {% endfor %}
    </table>
{% else %}
<h4>There are no similar questions.</h4>
{% endif %}
{% endblock %}

{% block javascript %}
<script>
    $('span').tooltip();
</script>
{% endblock %}
